<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />
    <link rel="stylesheet" href="./css/style.css">
    <script defer src="https://pyscript.net/latest/pyscript.js"></script>
    <title>Google Map with Info Window and Link</title>
    <style>
        #map {
            height: 400px;
            width: 100%;
        }
    </style>
</head>
<body>
<article>
  <div class="side">
    <p>ã‚µã‚¤ãƒ‰ãƒãƒ¼</p>
  </div> 
  <div class="content">
    <p>ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„</p>
  </div>
</article>
    <div id="map"></div>
    <script>
        var map;
        var infoWindow;

        function initMap() {
            // ãƒãƒƒãƒ—ã‚’è¡¨ç¤ºã™ã‚‹ãŸã‚ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’è¨­å®š
            var mapOptions = {
                center: { lat:0, lng:0}, // ãƒãƒƒãƒ—ã®åˆæœŸä¸­å¿ƒä½ç½®
                zoom: 15, // ã‚ºãƒ¼ãƒ ãƒ¬ãƒ™ãƒ«ï¼ˆ1ãŒæœ€å°ã€20ãŒæœ€å¤§ï¼‰
            };
            // åœ°å›³ã‚’ä½œæˆ
            var map = new google.maps.Map(document.getElementById("map"), mapOptions);
  // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç¾åœ¨ä½ç½®ã‚’å–å¾—ã—ã¦åœ°å›³ä¸Šã«è¡¨ç¤º
  if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function(position) {
                    var userLocation = {
                        lat: position.coords.latitude,
                        lng: position.coords.longitude
                    };
            

                   
              
                    // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä½ç½®ã«ãƒãƒ¼ã‚«ãƒ¼ã‚’è¿½åŠ 
                    new google.maps.Marker({
                        position: userLocation,
                        map: map,
                        title: "ç¾åœ¨ã®ä½ç½®"
                    });

                    // ãƒãƒƒãƒ—ã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä½ç½®ã«ç§»å‹•
                    map.setCenter(userLocation);
                    map.setZoom(15);
                }, function(error) {
                    // ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
                    console.error("ä½ç½®æƒ…å ±ã‚’å–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚ã‚¨ãƒ©ãƒ¼: " + error.message);
                });
            } else {
                // ãƒ–ãƒ©ã‚¦ã‚¶ãŒä½ç½®æƒ…å ±ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ãªã„å ´åˆã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
                console.error("ã“ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¯ä½ç½®æƒ…å ±ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã›ã‚“ã€‚");
            }


            // æƒ…å ±ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’åˆæœŸåŒ–
            infoWindow = new google.maps.InfoWindow();

            // ãƒ”ãƒ³ã‚’ç«‹ã¦ãŸã„ä½æ‰€
            var address = "æ°´æ·±162cmã®æ—¥æœ¬ä¸€æ·±ã„æ¸©æ³‰ãŒã‚„ã°ã™ããŸâ€¦173cmã®ä¿ºã¯æ¯å‡ºæ¥ãªã‹ã£ãŸğŸ¤£ ğŸ“ç†Šæœ¬çœŒå—å°å›½ç”ºã€€ã“ã†ã®æ¹¯ #ç†Šæœ¬ #ã“ã†ã®æ¹¯ #ç†Šæœ¬æ¸©æ³‰";

            // ã‚¸ã‚ªã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚’å®Ÿè¡Œ
            var geocoder = new google.maps.Geocoder();
            geocoder.geocode({ address: address }, function(results, status) {
                if (status === 'OK') {
                    var location = results[0].geometry.location;

                    // ãƒ”ãƒ³ã‚’ä½œæˆ
                    var marker = new google.maps.Marker({
                        position: location,
                        map: map,
                        title: address
                    });

                    // è©³ç´°æƒ…å ±ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã®å†…å®¹
                    var contentString = '<div>ã‚µãƒ³ãƒ—ãƒ«<h3>' + address + '</h3><p>è©³ç´°æƒ…å ±ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p><p><a href="https://www.tiktok.com/@yuuuuto38/video/7293401284609150216?q=%E7%A6%8F%E5%B2%A1%E8%A6%B3%E5%85%89&t=7150595195619282178" target="_blank">ã‚µã‚¤ãƒˆã¸ã®ãƒªãƒ³ã‚¯</a></p></div>';

                    // ãƒ”ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ãŸã¨ãã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
                    marker.addListener('click', function() {
                        // è©³ç´°æƒ…å ±ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã«å†…å®¹ã‚’ã‚»ãƒƒãƒˆ
                        infoWindow.setContent(contentString);

                        // ãƒ”ãƒ³ã®ä½ç½®ã«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’è¡¨ç¤º
                        infoWindow.open(map, marker);
                    });
                } else {
                    alert('ã‚¸ã‚ªã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã«å¤±æ•—ã—ã¾ã—ãŸ: ' + status);
                }
            });
        }
    </script>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCUqiDP-1T8cxCyJRYrel2GIcAlz5_vgAE&callback=initMap"></script>
    <py-script>

    
  print(19)
    </py-script>
</body>
</html>
