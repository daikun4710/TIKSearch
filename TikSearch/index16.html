<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Leaflet Routing Machine サンプル</title>
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />

    <!-- Leaflet Routing Machine CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.css" />
</head>
<body>
    <div id="map" style="height: 400px;"></div>

    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet-routing-machine@3.2.12/dist/leaflet-routing-machine.js"></script>

    <script>
        var map = L.map('map').setView([38.2048, 138.2529], 5); // デフォルトの座標とズームレベル

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
        }).addTo(map);

// ユーザーの現在地を取得
if ("geolocation" in navigator) {
    navigator.geolocation.getCurrentPosition(function(position) {
        var currentLocation = L.latLng(position.coords.latitude, position.coords.longitude);

         博多駅と天神駅の郵便番号と住所
        var hakataPostalCode = "812-0011";
        var tenjinPostalCode = "810-0001";

        var hakataAddress = "福岡県福岡市博多区博多駅前";
        var tenjinAddress = "福岡県福岡市中央区天神";

        // Nominatimを使用して郵便番号と住所から座標を取得
        var geocoder = L.Control.Geocoder.nominatim();
        geocoder.geocode(hakataPostalCode, function(hakataResults) {
            geocoder.
        geocode(tenjinPostalCode, function(tenjinResults) {
           if (hakataResults.length > 0 && tenjinResults.length > 0) {
               var hakataLatLng = hakataResults[0].center;
               var tenjinLatLng = tenjinResults[0].center;
        // ルート計算用のコントロール
        L.Routing.control({
waypoints: [currentLocation, hakataLatLng],
                    }).addTo(map);

        // 別のルート計算用のコントロール
        L.Routing.control({
            waypoints: [currentLocation, // 現在地の座標
            tenjinLatLng], // 天神駅の座標
        }).addTo(map);
} else {
    alert("Geolocationがサポートされていません。");
}
        });
        });
    });
}


// ユーザーの現在地を取得
//if ("geolocation" in navigator) {
  //  navigator.geolocation.getCurrentPosition(function(position) {
    //    var currentLocation = L.latLng(position.coords.latitude, position.coords.longitude);

        // 博多駅と天神駅の郵便番号と住所
      //  var hakataPostalCode = "812-0011";
        //var tenjinPostalCode = "810-0001";

       // var hakataAddress = "福岡県福岡市博多区博多駅前";
       // var tenjinAddress = "福岡県福岡市中央区天神";

        // Nominatimを使用して郵便番号と住所から座標を取得
       // var geocoder = L.Control.Geocoder.nominatim();
       // geocoder.geocode(hakataPostalCode, function(hakataResults) {
         //   geocoder.geocode(tenjinPostalCode, function(tenjinResults) {
           //     if (hakataResults.length > 0 && tenjinResults.length > 0) {
             //       var hakataLatLng = hakataResults[0].center;
               //     var tenjinLatLng = tenjinResults[0].center;

                    // ルート計算用のコントロール
                 //   L.Routing.control({
                   //     waypoints: [currentLocation, hakataLatLng],
                    //}).addTo(map);

                    // 別のルート計算用のコントロール
                    //L.Routing.control({
                      //  waypoints: [currentLocation, tenjinLatLng],
                    //}).addTo(map);
               // } else {
                 //   alert("指定の郵便番号と住所に対する座標が見つかりませんでした。");
              //  }
          //  geocoder.geocode(tenjinPostalCode, function(tenjinResults) {
            //    if (hakataResults.length > 0 && tenjinResults.length > 0) {
              //      var hakataLatLng = hakataResults[0].center;
                //    var tenjinLatLng = tenjinResults[0].center;

    
        //if ("geolocation" in navigator) {
    //navigator.geolocation.getCurrentPosition(function(position) {
      //  var userLocation = {
        //    lat: position.coords.latitude,
          //  lng: position.coords.longitude
        //};

        // マーカーを追加して現在位置を表示
        //L.marker(userLocation).addTo(map)
          //  .bindPopup("現在の位置")
            //.openPopup();
        
        //[ マップをユーザーの位置に移動
        //map.setView(userLocation,13);

        // 出発点と到着点の座標を設定
        //var start = L.latLng(userLocation); // 出発点の座標
        //var end = L.latLng(33.5884,130.4021);    // 到着点の座標
    
        // ルート計算用のコントロールを作成
        //L.Routing.control({
          //  waypoints: [
            //    start, // 出発点の座標
              //  end    // 到着点の座標
            //],
        //}).addTo(map);
   // })
     //   }]
    </script>
</body>
</html>
